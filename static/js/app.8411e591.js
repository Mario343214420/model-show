(function(e){function t(t){for(var i,s,o=t[0],c=t[1],l=t[2],u=0,f=[];u<o.length;u++)s=o[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);d&&d(t);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,o=1;o<n.length;o++){var c=n[o];0!==r[c]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},r={app:0},a=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=t,o=o.slice();for(var l=0;l<o.length;l++)t(o[l]);var d=c;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"074f":function(e,t,n){"use strict";var i=n("754d"),r=n.n(i);r.a},"0ffd":function(e,t,n){},1715:function(e,t,n){"use strict";var i=n("65c8"),r=n.n(i);r.a},"3e8f":function(e,t,n){"use strict";var i=n("9bcc"),r=n.n(i);r.a},"56d7":function(e,t,n){"use strict";n.r(t);n("a7cc"),n("450d");var i=n("df33"),r=n.n(i),a=(n("1951"),n("eedf")),s=n.n(a),o=(n("744f"),n("6c7b"),n("7514"),n("20d6"),n("1c4c"),n("6762"),n("cadf"),n("e804"),n("55dd"),n("d04f"),n("c8ce"),n("217b"),n("7f7f"),n("f400"),n("7f25"),n("536b"),n("d9ab"),n("f9ab"),n("32d7"),n("25c9"),n("9f3c"),n("042e"),n("c7c6"),n("f4ff"),n("049f"),n("7872"),n("a69f"),n("0b21"),n("6c1a"),n("c7c62"),n("84b4"),n("c5f6"),n("2e37"),n("fca0"),n("7cdf"),n("ee1d"),n("b1b1"),n("87f3"),n("9278"),n("5df2"),n("04ff"),n("f751"),n("4504"),n("fee7"),n("ffc1"),n("0d6d"),n("9986"),n("8e6e"),n("25db"),n("e4f7"),n("b9a1"),n("64d5"),n("9aea"),n("db97"),n("66c8"),n("57f0"),n("165b"),n("456d"),n("cf6a"),n("fd24"),n("8615"),n("551c"),n("097d"),n("df1b"),n("2397"),n("88ca"),n("ba16"),n("d185"),n("ebde"),n("2d34"),n("f6b3"),n("2251"),n("c698"),n("a19f"),n("9253"),n("9275"),n("3b2b"),n("3846"),n("4917"),n("a481"),n("28a5"),n("386d"),n("6b54"),n("4f7f"),n("8a81"),n("ac4d"),n("8449"),n("9c86"),n("fa83"),n("48c0"),n("a032"),n("aef6"),n("d263"),n("6c37"),n("9ec8"),n("5695"),n("2fdb"),n("d0b0"),n("5df3"),n("b54a"),n("f576"),n("ed50"),n("788d"),n("14b9"),n("f386"),n("f559"),n("1448"),n("673e"),n("242a"),n("c66f"),n("b05c"),n("34ef"),n("6aa2"),n("15ac"),n("af56"),n("b6e4"),n("9c29"),n("63d9"),n("4dda"),n("10ad"),n("c02b"),n("4795"),n("130f"),n("ac6a"),n("96cf"),n("2b0e")),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},["/home"!==this.$route.path?n("div",{staticClass:"page-title-wrapper"},[n("span",{staticClass:"page-title"},[e._v("\n      "+e._s(e.returnRouteName())+"\n    ")]),n("span",{staticClass:"to-home"},[n("router-link",{attrs:{to:"/home"}},[e._v("返回")])],1)]):e._e(),n("router-view")],1)},l=[],d={name:"app",methods:{returnRouteName:function(){var e=this.$route.path;switch(e){case"/channel1":return"孔道模型1";case"/channel2":return"";case"/channel3":return""}}}},u=d,f=(n("7faf"),n("2877")),h=Object(f["a"])(u,c,l,!1,null,null,null),p=h.exports,v=n("8c4f"),m=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[e._v("\n  Home"),n("br"),n("router-link",{attrs:{to:"/channel1"}},[e._v("to channel1")]),n("br"),n("router-link",{attrs:{to:"/channel2"}},[e._v("to channel2")]),n("br"),n("router-link",{attrs:{to:"/channel3"}},[e._v("to channel3")]),n("br")],1)},b=[],w={name:"Home"},g=w,y=Object(f["a"])(g,m,b,!1,null,"74af483f",null),O=y.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"line-views"},[n("el-dialog",{attrs:{title:"放大",visible:e.centerDialogVisible,"append-to-body":"",top:"8vh",width:"1050px",height:"60%",center:""},on:{"update:visible":function(t){e.centerDialogVisible=t},opened:e.dialogRender}},[n("div",[n("lineView",{ref:"lineViewDialog",staticClass:"dialog-view",attrs:{"no-magnify":"",controller:"",size:{w:1e3,h:700},"is-ortho":e.fullOptions.isOrtho,dir:e.fullOptions.dir}})],1)]),n("div",{staticClass:"left"},[n("HandleLineGroup",{on:{"reset-line-view":e.initViews}})],1),n("div",{staticClass:"right"},[n("div",{ref:"lineView",staticClass:"view"},[n("lineView",{ref:"lineView1",attrs:{size:e.viewSize,"is-ortho":"",dir:1},on:{"open-dialog":e.openFullDialog}})],1),n("div",{staticClass:"view"},[n("lineView",{ref:"lineView2",attrs:{size:e.viewSize,dir:2,"is-ortho":""},on:{"open-dialog":e.openFullDialog}})],1),n("div",{staticClass:"view"},[n("lineView",{ref:"lineView3",attrs:{size:e.viewSize,"is-ortho":"",dir:3},on:{"open-dialog":e.openFullDialog}})],1),n("div",{staticClass:"view"},[n("lineView",{ref:"lineView4",attrs:{size:e.viewSize,dir:0,controller:""},on:{"open-dialog":e.openFullDialog}})],1)])],1)},_=[],z=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"lineView",staticClass:"line-view"},[n("div",{staticClass:"dir-tag"},[e._v("\n    "+e._s(e.dirName)+"\n  ")]),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.noMagnify,expression:"!noMagnify"}],staticClass:"full-screen-btn",attrs:{title:"放大"}},[n("i",{staticClass:"el-icon-full-screen",on:{click:e.openFullDialog}})]),n("canvas",{ref:"cvs",attrs:{width:e.size.w,height:e.size.h}})])},j=[],P=n("5a89"),C=n("4721"),D=n("2f62");function $(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$(n,!0).forEach((function(t){L(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S={name:"LineView",props:{size:{type:Object},controller:{type:Boolean},isOrtho:{type:Boolean},dir:{type:Number},noMagnify:{type:Boolean||String}},data:function(){return{scene:null,camera:null,renderer:null,controls:null}},methods:{animate:function(){this.controller&&this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate)},render:function(){var e=this,t=this.size,n=t.w/t.h,i=this.colors;if(this.scene=new P["eb"],this.isOrtho)switch(this.camera=new P["T"](this.size.w/-5,this.size.w/5,this.size.h/5,this.size.h/-5,1,500),this.dir){case 1:this.camera.position.z=200;break;case 2:this.camera.position.x=-100;break;case 3:this.camera.position.y=100;break}else this.camera=new P["U"](50,n,.1,1e3),this.camera.position.z=200;var r=this.$refs.cvs;this.renderer=new P["sb"]({canvas:r,antialias:!0,alpha:!0}),this.renderer.setSize(t.w,t.h),this.lines.forEach((function(t,n){e.resetLine(t,i[n])}));var a=new P["e"](100,100,100),s=new P["l"](a,1),o=new P["x"]({color:16777215}),c=new P["z"](s,o),l=new P["K"]({color:9616380,transparent:!0,opacity:.1}),d=new P["J"](a,l);this.camera.lookAt(d.position),this.scene.add(c),this.scene.add(d),this.scene.fog=new P["o"](2236962,0,700),this.controller&&(this.controls=new C["a"](this.camera,this.renderer.domElement))},resetLine:function(e,t){var n=new P["x"]({color:t,linewidth:10,linecap:"round",linejoin:"round"}),i=[];e.forEach((function(e){i.push(new P["qb"](e.x,e.y,e.z))}));var r=(new P["g"]).setFromPoints(i),a=new P["w"](r,n);this.scene.add(a)},openFullDialog:function(){this.$emit("open-dialog",this.dir)}},computed:E({},Object(D["c"])("threeTool",{lines:function(e){return e.lines},colors:function(e){return e.colors}}),{dirName:function(){return 1===this.dir?"前视图":2===this.dir?"左视图":3===this.dir?"顶视图":"自由视图"}})},V=S,k=(n("074f"),Object(f["a"])(V,z,j,!1,null,"6fe95c00",null)),I=k.exports,N=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"handle3DLine",staticClass:"handle-line-group"},[n("div",{staticClass:"input-group"},[n("div",{staticClass:"handle-btn-group"},[n("div",{staticClass:"line-count btn"},[e._v(e._s(this.lines.length)+"根")]),n("div",{staticClass:"add-btn btn",on:{click:function(t){return e.handleAdd(0)}}},[e._v("增加线")]),n("div",{staticClass:"del-btn btn"},[n("i",{staticStyle:{"font-style":"normal"}},[e._v("编号：")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.delLineIndex,expression:"delLineIndex"}],attrs:{type:"text"},domProps:{value:e.delLineIndex},on:{input:function(t){t.target.composing||(e.delLineIndex=t.target.value)}}}),n("i",{staticStyle:{"font-style":"normal","margin-left":"10px"},on:{click:function(t){return e.delLine(e.delLineIndex-1)}}},[e._v("删除线")])])]),n("div",{staticClass:"list-scroll-container"},e._l(e.lines,(function(t,i){return n("div",{key:i,staticClass:"line-location-list"},[e._m(0,!0),e._l(t,(function(t,r){return n("div",{key:r,staticClass:"item"},[n("span",[e._v("\r\n              "+e._s(r+1)+"\r\n            ")]),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.x,expression:"itemPoint.x"}],attrs:{type:"text"},domProps:{value:t.x},on:{input:function(n){n.target.composing||e.$set(t,"x",n.target.value)}}})]),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.y,expression:"itemPoint.y"}],attrs:{type:"text"},domProps:{value:t.y},on:{input:function(n){n.target.composing||e.$set(t,"y",n.target.value)}}})]),n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.z,expression:"itemPoint.z"}],attrs:{type:"text"},domProps:{value:t.z},on:{input:function(n){n.target.composing||e.$set(t,"z",n.target.value)}}})]),n("span",{staticClass:"handle-col"},[n("i",{staticClass:"el-icon-remove delete-btn",on:{click:function(t){return e.delPoint({lineIdx:i,pointIdx:r})}}})])])})),n("div",{staticClass:"add-point"},[n("div",[n("span",{on:{click:function(t){return e.addLineEndPoint(i)}}},[e._v("添加端点")]),n("span",{on:{click:e.renderAllScreen}},[e._v("重绘模型")])]),n("div",[n("span",[e._v("线编号")]),n("span",[e._v(e._s(i+1))]),n("span",[n("i",{staticClass:"el-icon-remove",staticStyle:{"margin-right":"1px","font-size":"18px"},on:{click:function(t){return e.delLine(i)}}})])])])],2)})),0)])])},M=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"item"},[n("span",[e._v("序号")]),n("span",[e._v("x")]),n("span",[e._v("y")]),n("span",[e._v("z")]),n("span",{staticClass:"handle-col"})])}];function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(n,!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H={name:"HandleLineGroup",computed:A({},Object(D["c"])("threeTool",{lines:function(e){return e.lines}})),data:function(){return{delLineIndex:0}},methods:A({},Object(D["b"])("threeTool",{addLine:"ADD_LINE",delLine:"DEL_LINE",addPoint:"ADD_POINT",delPoint:"DEL_POINT"}),{renderAllScreen:function(){this.$emit("reset-line-view")},handleAdd:function(e){0===e&&this.addLine([{x:0,y:0,z:0}])},addLineEndPoint:function(e){this.lines[e].push({x:void 0,y:void 0,z:void 0})}})},q=H,R=(n("3e8f"),Object(f["a"])(q,N,M,!1,null,"59a4294b",null)),B=R.exports,G={name:"Channel1",components:{lineView:I,HandleLineGroup:B},methods:{dialogRender:function(){this.$refs.lineViewDialog.render(),this.$refs.lineViewDialog.animate()},openFullDialog:function(e){this.centerDialogVisible=!0,this.fullOptions.dir=e,this.fullOptions.isOrtho=!0,e||(this.fullOptions.isOrtho=!1)},initViews:function(){this.viewSize.h=this.$refs.lineView.clientHeight,this.viewSize.w=this.$refs.lineView.clientWidth;for(var e=1;e<5;e++)this.$refs["lineView"+e].render(),this.$refs["lineView"+e].animate()}},mounted:function(){var e=this;this.$nextTick((function(){for(var t=function(t){setTimeout((function(){e.$store.state.threeTool.lines.forEach((function(e,n){console.log(e),console.log(n),0!==n?e.push({x:e[t].x,y:e[t].y-1.5*Math.random(),z:40-10*t}):e.push({x:e[t].x-5.5,y:e[t].y-1.5*Math.random(),z:40-10*t})})),e.initViews()}),400*t)},n=0;n<8;n++)t(n)}))},data:function(){return{viewSize:{},centerDialogVisible:!1,fullOptions:{isOrtho:!0,dir:null}}}},J=G,U=(n("e1d3"),Object(f["a"])(J,x,_,!1,null,"a4063bf6",null)),W=U.exports,K=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"channel"},[n("canvas",{ref:"cvs",attrs:{width:"1000",height:"700"}})])},Q=[],X=n("34ad"),Y={name:"Channel2",data:function(){return{scene:null,camera:null,renderer:null,controls:null,deg:0}},mounted:function(){this.init(),this.animate()},methods:{init:function(){var e=this,t=this.$refs.cvs;this.scene=new P["eb"],this.camera=new P["U"](50,1e3/700,.1,1e3),this.camera.position.z=200;var n=new X["a"];n.load("./models/conveyor/scene.gltf",(function(t){t.scene.traverse((function(e){e.isMesh&&(e.material.emissive=e.material.color,e.material.emissiveMap=e.material.map)})),e.scene.add(t.scene),e.scene.add(new P["a"](6710886))})),this.renderer=new P["sb"]({canvas:t,antialias:!0,alpha:!0}),this.renderer.setSize(1e3,700),this.controls=new C["a"](this.camera,this.renderer.domElement)},animate:function(){this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate)}}},Z=Y,ee=Object(f["a"])(Z,K,Q,!1,null,"7d6d8801",null),te=ee.exports,ne=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"channel",staticClass:"channel"},[n("canvas",{ref:"cvs",attrs:{width:"w",height:"h"}})])},ie=[],re={name:"Channel3",data:function(){return{scene:null,camera:null,renderer:null,controls:null,deg:0,w:0,h:0}},mounted:function(){var e=this,t=this.$refs.channel;this.w=t.clientWidth,this.h=t.clientHeight,this.$nextTick((function(){e.init(),e.animate()}))},methods:{init:function(){var e=this,t=this.$refs.cvs,n=this.w/this.h;this.scene=new P["eb"],this.camera=new P["U"](50,n,1,1e3),this.camera.position.z=300;var i=new X["a"];i.load("./models/dragoner/scene.gltf",(function(t){t.scene.traverse((function(e){e.isMesh&&(e.material.emissive=e.material.color,e.material.emissiveMap=e.material.map)})),t.scene.position.y=-100,t.scene.position.x=-200,t.scene.castShadow=!0,console.log(t.scene),e.scene.add(t.scene),e.camera.lookAt(e.scene.position);var n=new P["a"](16777215);e.scene.add(n);var i=new P["jb"](16777215);i.castShadow=!0,i.position.set(100,100,100),i.shadowMapWidth=i.shadowMapHeight=4096,e.scene.add(i)})),this.renderer=new P["sb"]({canvas:t,antialias:!0}),this.renderer.setSize(1e3,700),this.controls=new C["a"](this.camera,this.renderer.domElement)},animate:function(){this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate)}}},ae=re,se=(n("1715"),Object(f["a"])(ae,ne,ie,!1,null,"333abb50",null)),oe=se.exports,ce=[{path:"/home",component:O},{path:"/channel1",component:W},{path:"/channel2",component:te},{path:"/channel3",component:oe},{path:"/",redirect:"/home"}],le=[].concat(ce);o["default"].use(v["a"]);var de=new v["a"]({mode:"history",routes:le}),ue=de,fe={lines:[[{x:-10,y:-10,z:50}],[{x:0,y:0,z:50}],[{x:10,y:10,z:50}],[{x:0,y:10,z:50}],[{x:-10,y:0,z:50}],[{x:10,y:-10,z:50}],[{x:-10,y:10,z:50}],[{x:10,y:0,z:50}]],colors:["#fd4747","#b0e5f4","#fcc199","#95c1f9","#e2fc99","#f9c5b6","#f4b2d8","#6588d8","#a2f9b8","#80f7f5","#ffdfcc","#b0e5f4","#fcc199","#95c1f9","#e2fc99","#f9c5b6","#f4b2d8","#6588d8","#a2f9b8","#80f7f5","#ffdfcc"]},he={ADD_LINE:function(e,t){e.lines.push(t)},ADD_POINT:function(e,t,n){e.lines[t].push({x:n.x,y:n.y,z:n.z})},DEL_LINE:function(e,t){e.lines.splice(t,1)},DEL_POINT:function(e,t){e.lines[t.lineIdx].splice(t.pointIdx,1)}},pe={},ve={namespaced:!0,state:fe,mutations:he,actions:pe};o["default"].use(D["a"]);var me=new D["a"].Store({modules:{threeTool:ve}});o["default"].use(s.a),o["default"].use(r.a),new o["default"]({router:ue,store:me,render:function(e){return e(p)}}).$mount("#app")},"586c":function(e,t,n){},"65c8":function(e,t,n){},"754d":function(e,t,n){},"7faf":function(e,t,n){"use strict";var i=n("586c"),r=n.n(i);r.a},"9bcc":function(e,t,n){},e1d3:function(e,t,n){"use strict";var i=n("0ffd"),r=n.n(i);r.a}});